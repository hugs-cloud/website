language: ruby
rvm:
- 2.6.3
before_script:
- chmod +x ./script/cibuild
script: "./script/cibuild"
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - secure: PNOqYKZQgquzA7h97bPC16szrzeMWlmHkvaT+JvbOzYqB2BiMsKoG4/isImxnOCKG3mh+LbB1uXpMkZKGqImAOHjzaoqWOVlZQpY+MmmqBMYFfl/ACdU+w4lOuTEA5tGV+SI9THnO/M+9cGH/fqZ6Zo4s+JxzRnTVeTQENYFYyaGWm7Tf0MjXN5fwPTXoCKAzn9kibonZLgsD3USawMs9uTDVRGKvoSsYhXkQIJtIfTZGNIZuVFxC7YslnMGgYSq7/3fkNT+b+RyRg7185WrGqdrrWfpvYNHNHOrTK9PviJyGpJXGA7gOvrnXGJLGbjcMNmUXBz5wCxQA/U1aDN93MnJiZ4RqHByI2Zl5LZ2Je/95DBnzc4nuviAmWdWlDREZJi8HLdpWsZCNK/rD8KvhYPSPgFRBa8kMN9M5J3XIY6MbmrVUSGlnVR57b8bhngirauxx1I2R6fiLgQu7R+lGmQ9Fq7gwMlvBPmTAFVdoK7LBxqUtcVhkI6ZpaiEYn8OLDdGbldogML8r90bXMWWbkG2cN09IQCzhFtWwPlMPQWI6sTnferyb8FVrRyJ7X4zV85n9DPazVgeKiySKEUA5+lWhI+TYmyLt27LyF7xbKgr6dyxtYZ5fNu1EBKYmvDPu03mABwZhmn+fYLH6XUWdm36O/LN1PbGdBB/2DjwANA=
  - secure: RDVrJT60LQk4vgOb5A1CPrx+uoi7dk+m7sufQUzcmftP3NrBBbYgTEqmVo5UaCHWJ6Ev/IfEd1xx6l92zRum/IHQod0k8jve3fDqAxNXG7F3W/TyZ1FM8VCYPPlnZR4M6xJA2e9NS4CvedarHb0FnfawbZrY9DMZ/5FL7GdLGOt48T/WcLWIQT4Lgb70Ex5WmEdW/C8hkouHGPLVkZsNgz+Ff6orTok4rAGX+gKbzCrsqu6/UsNBfgB73nHrcSCBZJeRSeenBt4Ja9MdTY1RKW0Rub2BQkw4z/TX7T7iWlJhcfX0IWeU1QAmKXjtFQbzWGadEDrrMIw32Y+CkVotQ3mnB6mAdyj/Hx9mIO5N6G5dkx3POcZfQuAwKe+SsUn8UYv9a7YkJzF078nlg140eZ9BfIcHH5lY94t6cWnXDxgd1B2Kuq5j/Khnwtv1GFVdkJX81VAanDciQ+W34AUy3EgPayHz/0yl/d2g0W3p34eiqCq6zy960GuEPfisQqJbqQYwRhJY8d5h4C5LvEyjQzPnG7YWQg7dpIjsgkF2pgnB5JdxN/Tro0wmd2lNR8ne7RzlQUNvspZNyDe67ElIvDiSwidVwkMQgYGiNx1+6Gmcdw8WN3ua42HkHOxuk1fHhNOOFmFZy3DalK5zpCRYdgpqEhdF9I2vVIJ8xniGtyY=
  - secure: atWxiUP4Nb0BbRLdvnKNHGG18qs/AwHLgA9ntye4VZxdHlN00Ns2dmW9nEzm8YLPXoWP0h/fNYhFTSa+4qSY2/1jYeX/sUD8BTOqznxnHhYXjwjM2+wtBtGAEMfHiBhcANIjyHziE3FvAKMuzG0JACO0qRs4ZpxyUhyOr0hq6TXBBY+v3r+zGcbuA6p25bAgrOiC8IemGbMryHVTwrcI0rt5tzlMB7XC4AJ/c36ZXfG0DT/jZzwesl7FMPfesJzAajbDJmnMfem4QFewFjIF4M4Mg/GAbxkELyzUV5UA3kprez8ztjx70wefWJCPOTynBNVCfQVKxbsmyTnc0FYPXO7omHg4qitzpp7QxU5WjVnX7HKYPzKO31kw/cmmdgntETrQjlIwuLPsT4fsuY2bwQlePlAtAkz4Pw/3gg13OXAD2zGSw/EN6dpH4sGu5kYjLbp5DeuxI4w48fCZpz7MwOuC+R/BPQkDV2EZcPFMKglYaJCpDhHK63G1pZWVx4dpuzPMXdhelOWPzE67IBjFNB2C0EPqP35EkUW5l9FNFbzFi8rL7tvIRguOpeTNA4fdsfYJIl3dUCoVNVnIGA6HKBXpGih+rX9HXYTbacodTsqlDFRNL7JAC2Y4txm3eVTj5I3aYQFK9l4Ju3Hn+WLL2e53fffHbMTAWuh+A8WCoRE=
addons:
  apt:
    packages:
    - libcurl4-openssl-dev
sudo: false
cache: bundler
notifications:
  email: false
before_deploy:
- openssl aes-256-cbc -K $encrypted_c2b1b043b0a0_key -iv $encrypted_c2b1b043b0a0_iv
  -in deploy_rsa.enc -out /tmp/deploy_rsa -d
- eval "$(ssh-agent -s)"
- chmod 600 /tmp/deploy\_rsa
- ssh-add /tmp/deploy\_rsa
- echo -e "Host $DEPLOY_HOST\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
deploy:
  provider: script
  skip_cleanup: true
  script: rsync -r --quiet --delete-after _site/* $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_DIRECTORY
  on:
    branch: master
